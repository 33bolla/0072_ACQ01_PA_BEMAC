<script> 
/**
 * Libreria di funzioni Front End standard  per Automazione
 *                  --------by maoSoft()---------
 *
 *  ---------------------------------------------------------------- -------------------
 *   R01.002| 20200811| revisione per  miglioramento documentazione applicazione CMA001_PortalCMA   
 *  ------------------------------------------------------------------------------------ 
 *  function list (last in first out)
 * 
 *
 *#getToday(inputFields)//inserisce nei campi form specificati la data odierna
 *
 *#createAppFolder //lancia la coniugata BE 
    *che crea un folder nella url indicata e carica template files. 
 *
 */  
    //init library for using in AppScript
    console.log('in jsApp Front End Library');
    var url = localStorage.getItem("url"); // mandatory to open new window on google managed cloud!
    
    function setInputFieldsCurrentDate(inputFields){
        //build todayString
        let today = new Date();
        let dd = String(today.getDate()).padStart(2, '0');
        let mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        let yyyy = today.getFullYear();

        let todayString = yyyy + '-' + mm + '-' + dd;
        
        //fill all form dateFields (you can change them in form)
        for (let i=0; i<inputFields.length; i++){
            inputFields[i].val(todayString);
        }
        console.log(todayString);
        return todayString    
    }

    function createAppFolder(idAppFolder, folderName, templates){
        /** 
         * lancia la funzione be coniugata (libreria beDriveManager) che crea un nuovo folder con nome folderName nella cartella 
         * parent (idAppFolder), carica nel folder creato i files template (array di id in templates)
         * 
         * @param idAppFolder (str) id del Folder padre
         * @param folderName (str) nome da attribuire al folder
         * @param templates (array) id dei files da caricare nel folder alla sua creazione
        */
        
        //init & test
        console.log('in folder create js FE');   

        //call server side coniugate function 
        google.script.run.withSuccessHandler(onSuccess)
            .gsCreateAppFolder(idAppFolder, folderName, templates); 
            
        //callback function
        function onSuccess(risultato) {      
           console.log('questo Ã¨ il valore ritornato dal BE:  '+risultato); 
        }  
    
        /** ----Developer notes and needed improvements -------
         *  
         *  ---------------------------------------------------------------- 
         *  R01.001| 20200811| testata con applicazione CMA001_PortalCMA   
         *  ---------------------------------------------------------------- 
        * */     
    }
    
    console.log(' jsApp Front End Library Loaded');
    /** ----developer notes and needed improvements -------
     *  nella fe Libraries e al fine di semplificare
     *  il codice delle vxxxPage dovrebbero essere presenti:  
     *  #template for modal
     *  #template for form
     *  #standard event listener 
     * 
     *          -----library change log-----
     * 
     *  ---------------------------------------------------------------- 
     *  R01.001| 20200810| testata con applicazione CMA001_PortalCMA   
     *  ----------------------------------------------------------------
     * */  
    </script>


